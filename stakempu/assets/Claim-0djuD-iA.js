import{W as a,K as s,M as e,L as t,E as l,d as i,an as n}from"./MsStake-iw_DxEVZ.js";import{_ as o}from"./MetaMask-8E0tWPSn.js";/* empty css               */import{u as c,C as d,b as r}from"./custompopups-Esm_BiU5.js";import{d as u,L as v,r as m,x as p,c as y,f as w,t as f,u as g,n as h,b as x,e as C,g as S,F as _,a as k,p as b,h as F,_ as E}from"./index-lRGnzVmH.js";const N=a=>(b("data-v-25b5e6d6"),a=a(),F(),a),J={class:"claim"},O={class:"content"},j={class:"con-t"},M=N((()=>w("div",{class:"name"},[w("text",{class:"new__name"},"Wallet address")],-1))),B={class:"details"},D={class:"addr wrap-text"},I=N((()=>w("img",{class:"img",src:o,alt:""},null,-1))),R={style:{color:"#06FFDB"}},T={class:"con-t"},L=N((()=>w("div",{class:"name"},[w("text",{class:"new__name"},"Your reward")],-1))),V={class:"details"},A={class:"amount",style:{color:"#06FFDB"}},U={class:"content-claim"},z={class:"hint-content"},P={key:0,class:"title"},W=["src"],G=["src"],K={key:1,class:"hint-name"},Y={key:2,class:"hint-name success"},q={key:0,class:"showView"},H={class:"showBox"},Q={style:{display:"flex","justify-content":"flex-end",cursor:"pointer"}},X=N((()=>w("div",{style:{padding:"10px"}},"Claim function available on the 8th dayafter system launch.",-1))),Z=E(u({__name:"Claim",setup(o){const u=c(),b=v(),F=m("0xF09FD56e72933f4dC6817006660E6f0d13eB4E75"),E=m(!1),N=m(1),Z=m(!1),$=m(!1),aa=async()=>{parseFloat(ea.value)>0?Z.value=!0:Z.value=!1},sa=async()=>{u.Setpopupsdata(!0,1);const t=new a(window.ethereum).getSigner(),l=new s(F.value,e.abi,t);try{const{hash:a}=await l.ClaimRewards();for(;;){if(null!==await t.provider.getTransactionReceipt(a))break}u.Setpopupsdata(!0,2),await ta()}catch(i){(JSON.parse(JSON.stringify(i)).code="UNPREDICTABLE_GAS_LIMIT")?u.Setpopupsdata(!0,6,JSON.parse(JSON.stringify(i)).error.message):(JSON.parse(JSON.stringify(i)).code="ACTION_REJECTED")?u.Setpopupsdata(!0,3):u.Setpopupsdata(!0,4)}};p((async()=>{await ta(),aa()}));const ea=m(""),ta=async()=>{const l=new a(window.ethereum),i=new s(F.value,e.abi,l);try{const a=await i.CalculateReward();ea.value=parseFloat(t(a.reward)).toFixed(6),0==parseFloat(ea.value)&&(ea.value="0")}catch(n){}},la=m({img:d,text:"Confirm this transaction in your wallet"}),ia=async()=>{await ta(),aa()};return(a,s)=>{const e=l,t=i;return k(),y(_,null,[w("div",J,[w("div",O,[w("div",j,[M,w("div",B,[w("div",D,[I,w("text",R,f(g(b).accounts),1)])])]),w("div",T,[L,w("div",V,[w("div",A,f(ea.value||"0")+" MPU",1)])]),w("div",U,[Z.value?(k(),y("div",{key:0,class:"con-b",onClick:sa,style:{"font-size":"18px !important"}}," Claim")):(k(),y("div",{key:1,class:h(["con-b",{noclaim:!Z.value}]),style:{"font-size":"18px !important"}}," Claim",2))])])]),x(e,{modelValue:E.value,"onUpdate:modelValue":s[0]||(s[0]=a=>E.value=a),width:"30%",onClose:ia,"show-close":1!=N.value,"align-center":"",class:"signdialog"},{default:C((()=>[w("div",z,[N.value<=2||5==N.value?(k(),y("div",P,"Sign transaction")):S("",!0),w("div",{class:h(["hint-icon",{noimg:N.value>2&&5!=N.value}])},[1==N.value||5==N.value?(k(),y("img",{key:0,class:"hint-paddimg-icon",src:g(r),alt:""},null,8,W)):S("",!0),la.value.img?(k(),y("img",{key:1,class:h(["img",{paddimg:1==N.value||5==N.value}]),src:la.value.img,alt:""},null,10,G)):S("",!0)],2),2!=N.value?(k(),y("div",K,f(la.value.text),1)):(k(),y("div",Y,f(la.value.text),1))])])),_:1},8,["modelValue","show-close"]),$.value?(k(),y("div",q,[w("div",H,[w("div",Q,[x(t,{color:"#bdff00",onClick:s[1]||(s[1]=a=>$.value=!1)},{default:C((()=>[x(g(n))])),_:1})]),X])])):S("",!0)],64)}}}),[["__scopeId","data-v-25b5e6d6"]]);export{Z as default};
