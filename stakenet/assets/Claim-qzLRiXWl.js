import{W as a,R as s,U as e,S as t,E as l,d as i,au as n}from"./MsStake-_ET-cN_1.js";import{_ as o}from"./MetaMask-8E0tWPSn.js";/* empty css               */import{u as c,C as d,b as r}from"./custompopups-j3QrYe5F.js";import{d as u,L as v,r as m,x as p,c as w,b as y,f,M as g,t as h,u as x,n as S,e as C,g as k,F as _,a as b,p as E,h as N,_ as j}from"./index-t1OzRuHN.js";import{P as F}from"./planet-mPBntv1q.js";const J=a=>(E("data-v-15050363"),a=a(),N(),a),O={class:"claim"},T={class:"content"},R={class:"con-t"},I=J((()=>f("div",{class:"name"},"Wallet address",-1))),M={class:"details"},A={class:"addr wrap-text"},V=J((()=>f("img",{class:"img",src:o,alt:""},null,-1))),B={class:"con-t"},D=J((()=>f("div",{class:"name"},"Your reward",-1))),L={class:"details"},U={class:"amount"},z={class:"content-claim"},P={class:"hint-content"},W={key:0,class:"title"},G=["src"],K=["src"],Y={key:1,class:"hint-name"},q={key:2,class:"hint-name success"},H={key:0,class:"showView"},Q={class:"showBox"},X={style:{display:"flex","justify-content":"flex-end",cursor:"pointer"}},Z=J((()=>f("div",{style:{padding:"10px"}},"Claim function available on the 8th dayafter system launch.",-1))),$=j(u({__name:"Claim",setup(o){const u=c(),E=v(),N=m("0xF09FD56e72933f4dC6817006660E6f0d13eB4E75"),j=m(!1),J=m(1),$=m(!1),aa=m(!1),sa=async()=>{parseFloat(ta.value)>0?$.value=!0:$.value=!1},ea=async()=>{u.Setpopupsdata(!0,1);const t=new a(window.ethereum).getSigner(),l=new s(N.value,e.abi,t);try{const{hash:a}=await l.ClaimRewards();for(;;){if(null!==await t.provider.getTransactionReceipt(a))break}u.Setpopupsdata(!0,2),await la()}catch(i){(JSON.parse(JSON.stringify(i)).code="UNPREDICTABLE_GAS_LIMIT")?u.Setpopupsdata(!0,6,JSON.parse(JSON.stringify(i)).error.message):(JSON.parse(JSON.stringify(i)).code="ACTION_REJECTED")?u.Setpopupsdata(!0,3):u.Setpopupsdata(!0,4)}};p((async()=>{await la(),sa()}));const ta=m(""),la=async()=>{const l=new a(window.ethereum),i=new s(N.value,e.abi,l);try{const a=await i.CalculateReward();ta.value=parseFloat(t(a.reward)).toFixed(6),0==parseFloat(ta.value)&&(ta.value="0")}catch(n){}},ia=m({img:d,text:"Confirm this transaction in your wallet"}),na=async()=>{await la(),sa()};return(a,s)=>{const e=l,t=i;return b(),w(_,null,[y(F),f("div",O,[f("div",T,[f("div",R,[I,f("div",M,[f("div",A,[V,g(h(x(E).accounts),1)])])]),f("div",B,[D,f("div",L,[f("div",U,h(ta.value||"0")+" STAKNET",1)])]),f("div",z,[$.value?(b(),w("div",{key:0,class:"con-b mousein",onClick:ea,style:{"font-size":"18px !important",width:"320px !important"}}," Claim")):(b(),w("div",{key:1,class:S(["con-b mousein",{noclaim:!$.value}]),style:{"font-size":"18px !important",width:"320px !important"}}," Claim",2))])])]),y(e,{modelValue:j.value,"onUpdate:modelValue":s[0]||(s[0]=a=>j.value=a),width:"30%",onClose:na,"show-close":1!=J.value,"align-center":"",class:"signdialog"},{default:C((()=>[f("div",P,[J.value<=2||5==J.value?(b(),w("div",W,"Sign transaction")):k("",!0),f("div",{class:S(["hint-icon",{noimg:J.value>2&&5!=J.value}])},[1==J.value||5==J.value?(b(),w("img",{key:0,class:"hint-paddimg-icon",src:x(r),alt:""},null,8,G)):k("",!0),ia.value.img?(b(),w("img",{key:1,class:S(["img",{paddimg:1==J.value||5==J.value}]),src:ia.value.img,alt:""},null,10,K)):k("",!0)],2),2!=J.value?(b(),w("div",Y,h(ia.value.text),1)):(b(),w("div",q,h(ia.value.text),1))])])),_:1},8,["modelValue","show-close"]),aa.value?(b(),w("div",H,[f("div",Q,[f("div",X,[y(t,{color:"#bdff00",onClick:s[1]||(s[1]=a=>aa.value=!1)},{default:C((()=>[y(x(n))])),_:1})]),Z])])):k("",!0)],64)}}}),[["__scopeId","data-v-15050363"]]);export{$ as default};
