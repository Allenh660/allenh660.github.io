import{W as a,R as s,U as e,S as t,E as l,d as i,au as n}from"./MsStake-XXQrYsOj.js";import{_ as o}from"./MetaMask-8E0tWPSn.js";/* empty css               */import{u as c,C as d,b as r}from"./custompopups-GfQchbWB.js";import{d as u,L as v,r as m,x as p,c as f,b as w,f as y,M as g,t as h,u as x,n as S,e as C,g as k,F as b,a as _,p as E,h as N,_ as O}from"./index-HmN8oWZL.js";import{P as j}from"./planet-IJmQEfjB.js";const F=a=>(E("data-v-5076ffbd"),a=a(),N(),a),J={class:"claim"},R={class:"content"},I={class:"con-t"},T=F((()=>y("div",{class:"name"},"Wallet address",-1))),M={class:"details"},V={class:"addr wrap-text"},A=F((()=>y("img",{class:"img",src:o,alt:""},null,-1))),B={class:"con-t"},D=F((()=>y("div",{class:"name"},"Your reward",-1))),L={class:"details"},U={class:"amount"},z={class:"content-claim"},P={class:"hint-content"},W={key:0,class:"title"},G=["src"],Y=["src"],q={key:1,class:"hint-name"},H={key:2,class:"hint-name success"},K={key:0,class:"showView"},Q={class:"showBox"},X={style:{display:"flex","justify-content":"flex-end",cursor:"pointer"}},Z=F((()=>y("div",{style:{padding:"10px"}},"Claim function available on the 8th dayafter system launch.",-1))),$=O(u({__name:"Claim",setup(o){const u=c(),E=v(),N=m("0xF09FD56e72933f4dC6817006660E6f0d13eB4E75"),O=m(!1),F=m(1),$=m(!1),aa=m(!1),sa=async()=>{parseFloat(ta.value)>0?$.value=!0:$.value=!1},ea=async()=>{u.Setpopupsdata(!0,1);const t=new a(window.ethereum).getSigner(),l=new s(N.value,e.abi,t);try{const{hash:a}=await l.ClaimRewards();for(;;){if(null!==await t.provider.getTransactionReceipt(a))break}u.Setpopupsdata(!0,2),await la()}catch(i){(JSON.parse(JSON.stringify(i)).code="UNPREDICTABLE_GAS_LIMIT")?u.Setpopupsdata(!0,6,JSON.parse(JSON.stringify(i)).error.message):(JSON.parse(JSON.stringify(i)).code="ACTION_REJECTED")?u.Setpopupsdata(!0,3):u.Setpopupsdata(!0,4)}};p((async()=>{await la(),sa()}));const ta=m(""),la=async()=>{const l=new a(window.ethereum),i=new s(N.value,e.abi,l);try{const a=await i.CalculateReward();ta.value=parseFloat(t(a.reward)).toFixed(6),0==parseFloat(ta.value)&&(ta.value="0")}catch(n){}},ia=m({img:d,text:"Confirm this transaction in your wallet"}),na=async()=>{await la(),sa()};return(a,s)=>{const e=l,t=i;return _(),f(b,null,[w(j),y("div",J,[y("div",R,[y("div",I,[T,y("div",M,[y("div",V,[A,g(h(x(E).accounts),1)])])]),y("div",B,[D,y("div",L,[y("div",U,h(ta.value||"0")+" STRIO",1)])]),y("div",z,[$.value?(_(),f("div",{key:0,class:"con-b mousein",onClick:ea,style:{"font-size":"18px !important",width:"320px !important"}}," Claim")):(_(),f("div",{key:1,class:S(["con-b mousein",{noclaim:!$.value}]),style:{"font-size":"18px !important",width:"320px !important"}}," Claim",2))])])]),w(e,{modelValue:O.value,"onUpdate:modelValue":s[0]||(s[0]=a=>O.value=a),width:"30%",onClose:na,"show-close":1!=F.value,"align-center":"",class:"signdialog"},{default:C((()=>[y("div",P,[F.value<=2||5==F.value?(_(),f("div",W,"Sign transaction")):k("",!0),y("div",{class:S(["hint-icon",{noimg:F.value>2&&5!=F.value}])},[1==F.value||5==F.value?(_(),f("img",{key:0,class:"hint-paddimg-icon",src:x(r),alt:""},null,8,G)):k("",!0),ia.value.img?(_(),f("img",{key:1,class:S(["img",{paddimg:1==F.value||5==F.value}]),src:ia.value.img,alt:""},null,10,Y)):k("",!0)],2),2!=F.value?(_(),f("div",q,h(ia.value.text),1)):(_(),f("div",H,h(ia.value.text),1))])])),_:1},8,["modelValue","show-close"]),aa.value?(_(),f("div",K,[y("div",Q,[y("div",X,[w(t,{color:"#bdff00",onClick:s[1]||(s[1]=a=>aa.value=!1)},{default:C((()=>[w(x(n))])),_:1})]),Z])])):k("",!0)],64)}}}),[["__scopeId","data-v-5076ffbd"]]);export{$ as default};
